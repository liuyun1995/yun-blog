awk的基本格式

```shell
awk 'BEGIN{}pattern{commands}END{}' filename
```

#### 1 内置变量

| 内置变量 | 含义                                            |
| -------- | ----------------------------------------------- |
| $0       | 整行内容                                        |
| \$1-\$n  | 当前行的第1-n个字段                             |
| NF       | 当前行的字段个数，也就是有多少列                |
| NR       | 当前行的行号，从1开始计数                       |
| FNR      | 多文件处理时，每个文件行号单独计数，都是从0开始 |
| FS       | 输入字段分割符，不指定默认以空格或tab键分割     |
| RS       | 输入行分割符，默认回车换行                      |
| OFS      | 输出字段分割符，默认为空格                      |
| ORS      | 输出行分割符，默认为回车换行                    |

#### 2 运算符

##### 2.1 关系运算符

| 符号 | 含义             |
| ---- | ---------------- |
| <    | 小于             |
| >    | 大于             |
| <=   | 小于等于         |
| >=   | 大于等于         |
| ==   | 等于             |
| !=   | 不等于           |
| ~    | 匹配正则表达式   |
| !~   | 不匹配正则表达式 |

##### 2.2 逻辑运算符

| 符号 | 含义 |
| ---- | ---- |
| &&   | 与   |
| \|\| | 或   |
| !    | 非   |



#### 3 字符串函数

| 函数名              | 解释                                                  | 函数返回值                |
| ------------------- | ----------------------------------------------------- | ------------------------- |
| length(str)         | 计算字符串长度                                        | 整数长度值                |
| index(str1,str2)    | 在str1中查找str2的位置                                | 返回值为位置索引，从1计数 |
| tolower(str)        | 转换为小写                                            | 转换后的小写字符串        |
| toupper(str)        | 转换为大写                                            | 转换后的大写字符串        |
| substr(str,m,n)     | 从str的m个字符开始，截取n位                           | 截取后的子串              |
| split(str,arr,fs)   | 按fs分割字符串，结果保存到arr数组                     | 切割后的子串的个数        |
| match(str,RE)       | 在str中安装RE查找，返回位置                           | 返回索引位置              |
| sub(RE,RepStr,str)  | 在str中搜索符合RE的子串，将其替换为RepStr，只替换一个 | 替换的个数                |
| gsub(RE,RepStr,str) | 在str中搜索符合RE的子串，将其替换为RepStr，替换所有   | 替换的个数                |

